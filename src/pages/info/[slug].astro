---
import InfoPageLayout from '../../components/InfoPageLayout.astro';
import { getAllInfoPages, getInfoPageBySlug } from '../../utils/static-content';


// Static generation: Get all possible slugs from static content
export async function getStaticPaths() {
  const infoPages = getAllInfoPages();
  // Only return valid slugs
  return infoPages
    .filter(
      (page) =>
        page.slug &&
        typeof page.slug === 'string' &&
        page.slug.trim().length > 0
    )
    .map((page) => ({
      params: { slug: page.slug },
    }));
}

// Get the slug from the URL
const { slug } = Astro.params;
const pageData = getInfoPageBySlug(slug);
---

{pageData && (
  <InfoPageLayout
    slug={slug}
    fallbackHeading={pageData.heading}
    fallbackAccordion={pageData.accordion}
  />
)}

