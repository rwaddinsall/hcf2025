---
import DefaultLayout from '../layouts/DefaultLayout.astro';
import PageHeader from '../components/PageHeader.astro';
import Feature from '../components/Feature.astro';
import { getAllInfoPages } from '../utils/static-content';

const pageTitle = 'Festival Information';
const pageSubtitle = 'Everything you need to know about Hopkins Creek Festival';

// Get all available info pages from Strapi content
const infoPages = getAllInfoPages();

// Create icon mapping for different page types based on slug
const iconMapping: Record<string, string> = {
  'camping-accomodation': 'lucide:tent',
  'accessibility': 'mdi:wheelchair-accessibility',
  'ticketing-info': 'mdi:ticket',
  'arrival': 'mdi:car',
  'info-page': 'mdi:map', // Travel & Entry
};
---

<DefaultLayout title={pageTitle}>
  <PageHeader title={pageTitle} subtitle={pageSubtitle} />

  <section class="my-12">
    <div class="container">
      <div class="info-grid">
        {infoPages.map((page) => (
          <a href={`/info/${page.slug}`} class="info-card-link">
            <Feature 
              icon={iconMapping[page.slug] || 'mdi:information-outline'} 
              title={page.heading}
            >
              <p>Learn more â†’</p>
            </Feature>
          </a>
        ))}
      </div>
    </div>
  </section>
</DefaultLayout>

<style lang="scss">
  .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: var(--space-l);
    margin-top: var(--space-xl);
    align-items: stretch;

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
    }
  }

  // Style the card link wrapper
  :global(.info-card-link) {
    text-decoration: none;
    color: inherit;
    display: block;
    transition: all var(--animation-speed-fast) var(--cubic-bezier);

    &:focus {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
      border-radius: var(--radius-l);
    }
  }

  // Target the Feature components to ensure consistent height
  :global(.info-grid > .info-card-link > .feature) {
    display: flex;
    flex-direction: column;
    min-height: 200px;
    height: 100%;
  }

  // Ensure content fills the available space
  :global(.info-grid > .info-card-link > .feature .content) {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  // Style the "Learn more" text
  :global(.info-card-link .feature .content p) {
    margin-top: auto;
    font-weight: var(--font-weight-medium);
    opacity: 0.8;
  }
</style>
